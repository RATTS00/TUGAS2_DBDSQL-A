CREATE DATABASE AKADEMIK;
USE AKADEMIK;

CREATE TABLE FAKULTAS(
	ID_FAKULTAS SMALLINT,
	FAKULTAS VARCHAR(45),
	PRIMARY KEY(ID_FAKULTAS)
);

CREATE TABLE STRATA(
	ID_STRATA SMALLINT,
	SINGKAT VARCHAR(10),
	STRATA VARCHAR(45),
	PRIMARY KEY(ID_STRATA)
);

CREATE TABLE JURUSAN(
	ID_JURUSAN SMALLINT,
	ID_FAKULTAS SMALLINT,
	JURUSAN VARCHAR(45),
	PRIMARY KEY(ID_JURUSAN),
	FOREIGN KEY (ID_FAKULTAS) REFERENCES FAKULTAS (ID_FAKULTAS)
);

CREATE TABLE PROGRAM_STUDI(
	ID_PROGRAM_STUDI SMALLINT,
	ID_STRATA SMALLINT,
 	ID_JURUSAN SMALLINT,
	PROGRAM_STUDI VARCHAR(60),
	PRIMARY KEY(ID_PROGRAM_STUDI),
	FOREIGN KEY (ID_STRATA) REFERENCES STRATA (ID_STRATA),
	FOREIGN KEY (ID_JURUSAN) REFERENCES JURUSAN (ID_JURUSAN)
);

CREATE TABLE SELEKSI_MASUK(
	ID_SELEKSI_MASUK SMALLINT,
	SINGKAT VARCHAR(12),
	SELEKSI_MASUK VARCHAR(60),
	PRIMARY KEY (ID_SELEKSI_MASUK)
);

CREATE TABLE MAHASISWA(
	NIM VARCHAR(15),
	ID_SELEKSI_MASUK SMALLINT,
	ID_PROGRAM_STUDI SMALLINT,
	NAMA VARCHAR(45),
	ANGKATAN SMALLINT,
	TGL_LAHIR DATE,
	KOTA_LAHIR VARCHAR(60),
	JENIS_KELAMIN CHAR(1),
	PRIMARY KEY (NIM),
	FOREIGN KEY (ID_SELEKSI_MASUK) REFERENCES SELEKSI_MASUK (ID_SELEKSI_MASUK),
	FOREIGN KEY (ID_PROGRAM_STUDI) REFERENCES PROGRAM_STUDI (ID_PROGRAM_STUDI),
	CONSTRAINT CK_JENIS_KELAMIN CHECK (JENIS_KELAMIN IN ('P', 'L'))
);

show TABLES;

INSERT INTO FAKULTAS (ID_FAKULTAS, FAKULTAS)
VALUES ('1', 'Ekonomi & Bisnis');

INSERT INTO FAKULTAS (ID_FAKULTAS, FAKULTAS)
VALUES ('2', 'Ilmu Komputer');

INSERT INTO JURUSAN (ID_JURUSAN, ID_FAKULTAS, JURUSAN)
VALUES (21, 2, 'Informatika'), (22, 2, 'Sistem Informasi'), (23, 2, 'Teknik Komputer');

INSERT INTO STRATA (ID_STRATA,  SINGKAT, STRATA)
VALUES (1, 'D1', 'Diploma'), (2, 'S1', 'Sarjana'), (3, 'S2', 'Magister');

INSERT INTO PROGRAM_STUDI(ID_PROGRAM_STUDI, ID_STRATA, ID_JURUSAN, PROGRAM_STUDI)
VALUES (211, 2, 21, 'Teknik Informatika'), (212, 2, 21, 'Teknik Komputer'), (219, 3, 21, 'Magister Ilmu Komputer');

INSERT INTO SELEKSI_MASUK(ID_SELEKSI_MASUK, SINGKAT, SELEKSI_MASUK)
VALUES (1, 'SNMPTN', 'SELEKSI NASIONAL MAHASISWA PERGURUAN TINGGI NEGERI'), (2, 'SBMPTN', 'SELEKSI BERSAMA MAHASISWA PERGURUAN TINGGI NEGERI');

INSERT INTO MAHASISWA(NIM, ID_SELEKSI_MASUK, ID_PROGRAM_STUDI, NAMA, ANGKATAN, TGL_LAHIR, KOTA_LAHIR, JENIS_KELAMIN)
VALUES ('155150400', 1, 211, 'JONI', 2015, '1997-01-01', 'Malang', 'P'), ('155150401', 2, 212, 'JONO', 2015, '1997-10-02', 'Situbondo', 'P');
